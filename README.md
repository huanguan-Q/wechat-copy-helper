# 微信内容研究助手

一个Chrome浏览器扩展，用于学术研究和内容分析的微信公众号辅助工具，帮助研究人员更好地分析和引用内容。

## 🚀 功能特性

### 🖼️ 图片复制功能
- **防盗链绕过**：自动绕过微信图片防盗链机制
- **一键复制**：鼠标悬停显示复制按钮，点击即可复制图片
- **右键菜单**：添加专用的右键菜单选项
- **多种格式**：支持复制到剪贴板或下载到本地

### 📝 文字复制功能
- **解除限制**：移除文字选择和复制的限制
- **全文复制**：一键复制整篇文章内容
- **保持格式**：尽可能保持原有的文本格式

### ⚙️ 智能设置
- **开关控制**：可以单独开启/关闭各项功能
- **实时生效**：设置更改立即生效，无需刷新
- **状态显示**：实时显示扩展工作状态

## 📦 安装方法

### 方法一：开发者模式安装（推荐）

1. **下载扩展文件**
   ```bash
   # 如果你有这些文件，跳过此步骤
   # 确保你有完整的 wechat-copy-helper 文件夹
   ```

2. **打开Chrome扩展管理页面**
   - 在Chrome地址栏输入：`chrome://extensions/`
   - 或者：菜单 → 更多工具 → 扩展程序

3. **启用开发者模式**
   - 点击右上角的"开发者模式"开关

4. **加载扩展**
   - 点击"加载已解压的扩展程序"
   - 选择 `wechat-copy-helper` 文件夹
   - 点击"选择文件夹"

5. **确认安装**
   - 扩展应该出现在扩展列表中
   - 确保扩展已启用（开关为蓝色）

### 方法二：打包安装

1. **打包扩展**
   - 在扩展管理页面点击"打包扩展程序"
   - 选择 `wechat-copy-helper` 文件夹
   - 生成 `.crx` 文件

2. **安装打包文件**
   - 将 `.crx` 文件拖拽到扩展管理页面
   - 确认安装

## 🎯 使用方法

### 基本使用

1. **访问微信公众号文章**
   - 打开任意微信公众号文章页面
   - 扩展会自动激活并开始工作

2. **复制图片**
   - **方法1**：鼠标悬停在图片上，点击出现的"复制图片"按钮
   - **方法2**：右键点击图片，选择"复制微信图片"
   - **方法3**：直接右键图片选择"复制图像"

3. **复制文字**
   - **选择复制**：正常选择文字，Ctrl+C复制
   - **全文复制**：点击页面左上角的"复制全文"按钮
   - **右键复制**：选中文字后右键选择"复制选中文本"

### 高级设置

1. **打开设置面板**
   - 点击浏览器工具栏中的扩展图标
   - 在弹出窗口中调整设置

2. **功能开关**
   - **图片防盗链绕过**：解决图片无法显示的问题
   - **文字复制解锁**：移除文字选择限制
   - **快捷复制按钮**：显示便捷的复制按钮

3. **状态监控**
   - 绿色状态：扩展正常工作
   - 红色状态：需要刷新页面或检查设置

## 🔧 技术原理

### 防盗链绕过
```javascript
// 设置referrer策略
img.setAttribute('referrerpolicy', 'no-referrer');

// 添加meta标签
<meta name="referrer" content="no-referrer">
```

### 复制限制移除
```css
* {
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    user-select: text !important;
}
```

### 图片复制实现
```javascript
// 使用Canvas API处理图片
const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');
ctx.drawImage(img, 0, 0);
canvas.toBlob(blob => {
    navigator.clipboard.write([new ClipboardItem({'image/png': blob})]);
});
```

## ⚠️ 注意事项

### 使用限制
- 仅在微信公众号页面（mp.weixin.qq.com）生效
- 某些图片可能因服务器限制仍无法复制
- 需要Chrome 88+版本支持

### 法律声明
- 请尊重原创内容和版权
- 仅供个人学习和研究使用
- 不得用于商业用途或侵权行为

### 隐私保护
- 扩展不收集任何个人信息
- 不上传或存储用户数据
- 所有操作均在本地完成

## 🐛 故障排除

### 常见问题

**Q: 扩展安装后不工作？**
A: 
1. 确认扩展已启用
2. 刷新微信公众号页面
3. 检查是否在正确的域名下

**Q: 图片仍然无法复制？**
A:
1. 尝试右键另存为
2. 检查图片防盗链绕过功能是否开启
3. 某些图片可能有额外的保护机制

**Q: 文字无法选择？**
A:
1. 确认文字复制解锁功能已开启
2. 尝试刷新页面
3. 检查浏览器是否支持相关API

**Q: 扩展图标显示错误？**
A:
1. 重新加载扩展
2. 检查manifest.json文件是否正确
3. 确认所有文件都在正确位置

### 调试模式

1. **开启控制台**
   - 按F12打开开发者工具
   - 查看Console标签页的错误信息

2. **检查扩展状态**
   - 访问 `chrome://extensions/`
   - 点击扩展的"详细信息"
   - 查看错误和警告

## 📝 更新日志

### v1.0.0 (2024-09-03)
- 🎉 首次发布
- ✨ 图片防盗链绕过功能
- ✨ 文字复制限制移除
- ✨ 快捷复制按钮
- ✨ 右键菜单集成
- ✨ 设置面板
- ✨ 状态监控

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个扩展！

### 开发环境
```bash
# 克隆项目
git clone <repository-url>

# 进入目录
cd wechat-copy-helper

# 在Chrome中加载扩展进行测试
```

### 文件结构
```
wechat-copy-helper/
├── manifest.json      # 扩展配置文件
├── content.js         # 内容脚本
├── background.js      # 后台脚本
├── popup.html         # 弹出窗口界面
├── popup.js          # 弹出窗口逻辑
├── styles.css        # 样式文件
└── README.md         # 说明文档
```

## 📄 许可证

本项目仅供学习和研究使用，请遵守相关法律法规。

---

**免责声明**：本扩展仅为技术研究和学习目的开发，使用者应当遵守相关法律法规和平台规则，开发者不承担任何法律责任。